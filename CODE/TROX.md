# Trox串口屏

## 485通信协议
> 详细说明，参照《Trox 485通讯协议.docx》、《参数.xlsx》
### 标准报文格式 
 | Byte0   | Byte1  | Byte2  | Byte3  | Byte4―Byte11 | Byte12 | Byte13 |
 |:-----   | :----- | :----  | :----- | :----        | :----  | :-----| 
 | 起始帧1 | 起始帧2 | 命令字 | 源地址 | 数据域        | 优先级 | 校验和 |
    1.起始帧1：始终为0xAA。
    2.起始帧2：始终为0x55。
    3.命令字：需目标终端执行的动作指令。
    4.源地址：报文发送端的ID。
        * 控制板：0xA5
        * 房间触摸屏：0x5A
    5.数据域：8字节的数据信息，多字节数据则低字节在前。
    6.优先级：暂默认为0x0C，为扩展报文优先级的功能做预留。
    7.校验和：Byte0到Byte12做求和运算后，取低八位
### 主要指令
* 0xA0 ：读控制板数据1
* 0xA1 ：读控制板数据2
* 0x03 ：开关机（数据域不同）
* 0x07 ：读数据，数据域（Byte4）对应读取参数地址（对照参数表）
* 0x08 ：写数据，数据域（Byte4）对应写入参数地址（对照参数表）
> 修改报警声持续时间：AA 55 08 5A 42 00 00 00 00 00 00 00 0C AF 
![参数表:66(0x42)](image.png)

## 页面功能
### Program.s
* 全局变量：标志位、中间量、数据值、命令解析发送相关
* 系统设置：波特率、亮度、休眠/唤醒、解析模式、掉电存储、恢复出厂
### 全局功能
**屏保** ：触摸捕捉、定时器组件
> 返回上一页，参考官网示例dp、lastpage

**语言切换**：跳转中/英页面

**故障类型**：

**按键声音**：双击切换 
### 主页面



**紧急工况**：AA 55 03 5A ?04 00 AA AA 00 00 00 00 0C ##(计算校验和) 

**夜间模式/节能排风**：AA 55 03 5A ?05 00 AA AA 00 00 00 00 0C ##(计算校验和) 

**正常模式**： AA 55 03 5A 00 00 AA AA 00 00 00 00 0C

**开关阀门**：系统启停
    * 开机：AA 55 03 5A 00 00 AA AA 00 00 00 00 0C
    * 关机：AA 55 03 5A 00 00 55 55 00 00 00 00 0C
  
**故障显示**：AA 55 A2 5A 00 00 00 00 00 00 00 00 0C 07

**设置页面** ：跳转










